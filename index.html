<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XVJ29EC28D"></script>

<!-- Google Tag Manager -->
<script>
    (function(w,d,s,l,i){
        w[l]=w[l] || [];
        w[l].push(
            {'gtm.start':new Date().getTime(), event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),
                dl=l!='dataLayer'?'&l='+l:'';
                j.async=true;
                j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
                f.parentNode.insertBefore(j,f);
    })
    (window, document, 'script', 'dataLayer', 'GTM-THKBCT9Q');
</script>
 <!--   End Google Tag Manager -->
 <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){
      dataLayer.push(arguments);
  }
      gtag('js', new Date());
  
      gtag('config', 'G-XVJ29EC28D');
  </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>prva strana</title>
</head>
<body>

    <h1>Prva strana - home</h1>
    <p><a class="spa_klik" href="/spa_prva_strana">SPA 1. strana</a></p>
    <p><a class="spa_klik" href="/spa_druga_strana">SPA 2. strana</a></p>
    <p><a class="spa_klik" href="/spa_treca_strana">SPA 3. strana</a></p>

    <p>Idi na drugu stranu <a href="./druga">Druga</a></p>
    <p>Idi na treću stranu <a href="./treca">Treća</a></p>
    <h2>Sadržaj prve strane</h2>

    <script>

        function gtagPageView(title, url){
            gtag('config', 'G-XVJ29EC28D');
            /*
            gtag('event', 'klik_na_link_event', {
                'klik_na_link_tekst': title,
                'klik_na_link_href': url


            });
            */
                //gtag('klik_na_link_tekst',title);
                //gtag('klik_na_link_href', url);
                window.dataLayer.push({
                    'event':'virtualPageview',
                    'pageUrl': url,
                    'pageTitle':title
                });
            console.log('trebalo bi da je poslato '+title+' '+url)

        }


        let links=document.getElementsByClassName('spa_klik')
        for(let i=0; i<links.length; i++){
            links[i].addEventListener('click', e=>{
                e.preventDefault();
                let title=e.target.innerText;
                let url=e.target.href;
                console.log(title, url)
                gtagPageView(title, url);
            })
        }
    </script>
</body>
</html>